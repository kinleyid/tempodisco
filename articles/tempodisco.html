<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started • tempodisco</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tempodisco</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/tempodisco.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><h6 class="dropdown-header" data-toc-skip>Data preprocessing</h6></li>
    <li><a class="dropdown-item" href="../articles/adjusting-amounts.html">Processing adjusting-amounts data</a></li>
    <li><a class="dropdown-item" href="../articles/nonsystematic-discounting.html">Identifying nonsystematic discounting</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Model fitting</h6></li>
    <li><a class="dropdown-item" href="../articles/modeling-binary-choice-data.html">Modeling choice-level data</a></li>
    <li><a class="dropdown-item" href="../articles/visualizing-models.html">Visualizing models</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Statistical inference</h6></li>
    <li><a class="dropdown-item" href="../articles/area-under-curve.html">Measuring area under the curve</a></li>
    <li><a class="dropdown-item" href="../articles/comparing-models.html">Comparing across discount functions</a></li>
    <li><a class="dropdown-item" href="../articles/analyzing-study.html">Analyzing data from multiple participants</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/drift-diffusion-models.html">Drift diffusion models</a></li>
    <li><a class="dropdown-item" href="../articles/custom-discount-functions.html">Custom discount functions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kinleyid/tempodisco/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/kinleyid/tempodisco/blob/main/vignettes/tempodisco.Rmd" class="external-link"><code>vignettes/tempodisco.Rmd</code></a></small>
      <div class="d-none name"><code>tempodisco.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kinleyid.github.io/tempodisco/">tempodisco</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette briefly goes over the main steps involved in analyzing
delay discounting data. These topics are covered in greater depth in
other vignettes and in the documentation of the relevant functions.</p>
<div class="section level2">
<h2 id="loading-data">Loading data<a class="anchor" aria-label="anchor" href="#loading-data"></a>
</h2>
<p><code>tempodisco</code> includes several example datasets. We will
load one example from a simulated “adjusting amounts” procedure (<a href="https://doi.org/10.3791/53584" class="external-link">Frye et al., 2016</a>), and one
from a procedure in which choices were not structured according to such
a procedure.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"adj_amt_sim"</span><span class="op">)</span> <span class="co"># Load simulated choice data from an adjusting amounts procedure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">adj_amt_sim</span><span class="op">)</span></span>
<span><span class="co">#&gt;   del val_del val_imm imm_chosen trial_idx</span></span>
<span><span class="co">#&gt; 1   7     800     400      FALSE         1</span></span>
<span><span class="co">#&gt; 2   7     800     600      FALSE         2</span></span>
<span><span class="co">#&gt; 3   7     800     700      FALSE         3</span></span>
<span><span class="co">#&gt; 4   7     800     750      FALSE         4</span></span>
<span><span class="co">#&gt; 5   7     800     775      FALSE         5</span></span>
<span><span class="co">#&gt; 6  30     800     400      FALSE         6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"td_bc_single_ptpt"</span><span class="op">)</span> <span class="co"># Load choice data from a non-adjusting-amounts experiment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">td_bc_single_ptpt</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   id val_imm val_del       del imm_chosen    rt</span></span>
<span><span class="co">#&gt; 1 61dcacaa5ed72-dd-61dcb234e8a1c.txt     112     187   30.4167      FALSE 5.435</span></span>
<span><span class="co">#&gt; 2 61dcacaa5ed72-dd-61dcb234e8a1c.txt      50     187   30.4167      FALSE 1.913</span></span>
<span><span class="co">#&gt; 3 61dcacaa5ed72-dd-61dcb234e8a1c.txt      37     186 3652.5000       TRUE 2.931</span></span>
<span><span class="co">#&gt; 4 61dcacaa5ed72-dd-61dcb234e8a1c.txt      28     211  182.5000      FALSE 7.639</span></span>
<span><span class="co">#&gt; 5 61dcacaa5ed72-dd-61dcb234e8a1c.txt      53     197  182.5000       TRUE 2.129</span></span>
<span><span class="co">#&gt; 6 61dcacaa5ed72-dd-61dcb234e8a1c.txt      98     184  730.5000       TRUE 1.569</span></span></code></pre></div>
<p>For each dataset, there are rows containing the values of the
immediate and delayed rewards, the delay of the delayed reward, and
whether the immediate reward was chosen. To use the functions in
<code>tempodisco</code>, your own data will need these same columns
named in the same way.</p>
</div>
<div class="section level2">
<h2 id="computing-indifference-points">Computing indifference points<a class="anchor" aria-label="anchor" href="#computing-indifference-points"></a>
</h2>
<p>For the adjusting amounts data, we can use the
<code>adj_amt_indiffs</code> function to compute indifference points at
each delay:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indiff_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adj_amt_indiffs.html">adj_amt_indiffs</a></span><span class="op">(</span><span class="va">adj_amt_sim</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">indiff_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   del   indiff</span></span>
<span><span class="co">#&gt; 1   7 0.984375</span></span>
<span><span class="co">#&gt; 2  30 0.859375</span></span>
<span><span class="co">#&gt; 3  90 0.046875</span></span>
<span><span class="co">#&gt; 4 180 0.453125</span></span>
<span><span class="co">#&gt; 5 360 0.015625</span></span></code></pre></div>
<p>For non-adjusting-amounts data, we can use a form of logistic
regression that models each indifference point as the point at which a
participant has a 50% estimated probability of selecting the immediate
or delayed reward:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indiff_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/td_bcnm.html">td_bcnm</a></span><span class="op">(</span><span class="va">td_bc_single_ptpt</span>, discount_function <span class="op">=</span> <span class="st">'model-free'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">indiff_mod</span>, verbose <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<p><img src="tempodisco_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="data-quality-checks">Data quality checks<a class="anchor" aria-label="anchor" href="#data-quality-checks"></a>
</h2>
<p>We can test for non-systematic discounting per the criteria of <a href="https://doi.org/10.1037/1064-1297.16.3.264" class="external-link">Johnson &amp; Bickel
(2008)</a> using the <code>nonsys</code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="../reference/nonsys.html">nonsys</a></span><span class="op">(</span><span class="va">indiff_data</span><span class="op">)</span><span class="op">)</span> <span class="co"># Fails criterion 1 (monotonicity)</span></span>
<span><span class="co">#&gt;    C1    C2 </span></span>
<span><span class="co">#&gt;  TRUE FALSE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="../reference/nonsys.html">nonsys</a></span><span class="op">(</span><span class="va">indiff_mod</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    C1    C2 </span></span>
<span><span class="co">#&gt; FALSE FALSE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="measuring-discounting">Measuring discounting<a class="anchor" aria-label="anchor" href="#measuring-discounting"></a>
</h2>
<p>To quantify discounting given a set of indifference points, we can
use the “area under the curve” measure (<a href="https://doi.org/10.1901/jeab.2001.76-235" class="external-link">Myerson et al.,
2001</a>). The lower this measure is, the steeper an individual’s delay
discounting.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/AUC.html">AUC</a></span><span class="op">(</span><span class="va">indiff_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.3333984</span></span>
<span><span class="fu"><a href="../reference/AUC.html">AUC</a></span><span class="op">(</span><span class="va">indiff_mod</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.03146756</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="fitting-discount-functions">Fitting discount functions<a class="anchor" aria-label="anchor" href="#fitting-discount-functions"></a>
</h2>
<p>Fitting a discount function to a set of indifference points can be
done using the <code>td_ipm</code> function:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hyperbolic_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/td_ipm.html">td_ipm</a></span><span class="op">(</span><span class="va">indiff_data</span>, discount_function <span class="op">=</span> <span class="st">'hyperbolic'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">hyperbolic_mod</span><span class="op">)</span></span></code></pre></div>
<p><img src="tempodisco_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">hyperbolic_mod</span><span class="op">)</span></span>
<span><span class="co">#&gt;          k </span></span>
<span><span class="co">#&gt; 0.01767316</span></span></code></pre></div>
<p>In contrast, fitting a discount function to choice-level data
involves a form of logistic regression where, as before, the
indifference points (determined by a discount function) are the points
where the individual has a 50% estimated probability of selecting the
immediate vs delayed reward.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hyperbolic_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/td_bcnm.html">td_bcnm</a></span><span class="op">(</span><span class="va">td_bc_single_ptpt</span>, discount_function <span class="op">=</span> <span class="st">'hyperbolic'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">hyperbolic_mod</span>, verbose <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<p><img src="tempodisco_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">hyperbolic_mod</span><span class="op">)</span></span>
<span><span class="co">#&gt;          k      gamma </span></span>
<span><span class="co">#&gt; 0.01728009 0.06758106</span></span></code></pre></div>
<p>From here, we can extract the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>
values from the best-fitting hyperbolic discount curves for each
participant and use these as a measure of discounting (higher
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>
means steeper discounting).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Isaac Kinley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
