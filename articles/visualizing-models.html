<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Visualizing models • tempodisco</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualizing models">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tempodisco</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/tempodisco.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples">
<li><h6 class="dropdown-header" data-toc-skip>Data preprocessing</h6></li>
    <li><a class="dropdown-item" href="../articles/adjusting-amounts.html">Processing adjusting-amounts data</a></li>
    <li><a class="dropdown-item" href="../articles/nonsystematic-discounting.html">Identifying nonsystematic discounting</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Model fitting</h6></li>
    <li><a class="dropdown-item" href="../articles/modeling-binary-choice-data.html">Modeling choice-level data</a></li>
    <li><a class="dropdown-item" href="../articles/visualizing-models.html">Visualizing models</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Statistical inference</h6></li>
    <li><a class="dropdown-item" href="../articles/area-under-curve.html">Measuring area under the curve</a></li>
    <li><a class="dropdown-item" href="../articles/comparing-models.html">Comparing across discount functions</a></li>
    <li><a class="dropdown-item" href="../articles/analyzing-study.html">Analyzing data from multiple participants</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced topics</h6></li>
    <li><a class="dropdown-item" href="../articles/drift-diffusion-models.html">Drift diffusion models</a></li>
    <li><a class="dropdown-item" href="../articles/custom-discount-functions.html">Custom discount functions</a></li>
    <li><a class="dropdown-item" href="../articles/choice-rules.html">Choice rules</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kinleyid/tempodisco/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Visualizing models</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/kinleyid/tempodisco/blob/v1.0.0/vignettes/visualizing-models.Rmd" class="external-link"><code>vignettes/visualizing-models.Rmd</code></a></small>
      <div class="d-none name"><code>visualizing-models.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kinleyid.github.io/tempodisco/">tempodisco</a></span><span class="op">)</span></span></code></pre></div>
<p>We can visually inspect models using 4 types of plots, controlled by
the <code>type</code> argument to <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>. These plots use
base R graphics and are intended to be generated quickly (e.g., in a
loop over participants) to provide an easy visual check of model fit.
Publication-quality visualizations can be more readily generated using a
dedicated plotting package such as <a href="https://ggplot2.tidyverse.org/" class="external-link"><code>ggplot2</code></a>.</p>
<div class="section level2">
<h2 id="summary-plots">
<code>"summary"</code> plots<a class="anchor" aria-label="anchor" href="#summary-plots"></a>
</h2>
<p>For a binary choice model, a “summary” plot displays both the binary
choices and the discount curve:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"td_bc_single_ptpt"</span><span class="op">)</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/td_bcnm.html">td_bcnm</a></span><span class="op">(</span><span class="va">td_bc_single_ptpt</span>, discount_function <span class="op">=</span> <span class="st">'hyperbolic'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">'summary'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Plotting indifference curve for val_del = 198.314285714286 (mean of val_del from data used to fit model). Override this behaviour by setting the `val_del` argument to plot() or set verbose = F to suppress this message.</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>The plotting function prints some info, telling us it is plotting the
discount curve corresponding to the average delayed reward value from
the data used for fitting the model. This is only relevant if the
discount curve depends on the delayed reward value (i.e., if magnitude
effects are accounted for). In this case the magnitude effect is not
accounted for, so we can suppress this message using
<code>verbose = F</code>. We can also log-transform the x-axis to
achieve a more even spread between the delays:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">'summary'</span>, verbose <span class="op">=</span> <span class="cn">F</span>, log <span class="op">=</span> <span class="st">'x'</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>Additionally, we can plot some information about how stochastic the
individual’s decision making was. The discount curve shows where the
probability of selecting the immediate reward is predicted to be 50%,
but we can plot curves for other probabilities as well. For example, we
can show where the probability of selecting the immediate reward is 10%
and 90% by setting <code>p_lines = c(0.1, 0.9)</code>. For more
stochastic decision makers, there will be a greater separation between
these (note that this is <em>not</em> a confidence interval for the
discount curve itself):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">'summary'</span>, verbose <span class="op">=</span> <span class="cn">F</span>, log <span class="op">=</span> <span class="st">'x'</span>, p_lines <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.9</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>For an indifference point model, the discount function is usually
plotted alongside the empirical indifference points:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"td_ip_simulated_ptpt"</span><span class="op">)</span></span>
<span><span class="va">mod_ip</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/td_ipm.html">td_ipm</a></span><span class="op">(</span><span class="va">td_ip_simulated_ptpt</span>, discount_function <span class="op">=</span> <span class="st">'hyperbolic'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod_ip</span>, type <span class="op">=</span> <span class="st">'summary'</span>, log <span class="op">=</span> <span class="st">'x'</span>, verbose <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>The only exception to this is an indifference point model produced by
Kirby scoring, which applies to binary choice data. In this case, the
binary choices are displayed.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_ip</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/kirby_score.html">kirby_score</a></span><span class="op">(</span><span class="va">td_bc_single_ptpt</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod_ip</span>, type <span class="op">=</span> <span class="st">'summary'</span>, log <span class="op">=</span> <span class="st">'x'</span>, verbose <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>However, because indifference point models don’t explicitly model the
probabilities of individual choices, the other plot types are not
applicable to them.</p>
</div>
<div class="section level2">
<h2 id="endpoints-plots">
<code>"endpoints"</code> plots<a class="anchor" aria-label="anchor" href="#endpoints-plots"></a>
</h2>
<p>To visualize how stochastic the decision maker was, we can set
<code>type = 'endpoints'</code>. This plots a psychometric curve of the
probability of selecting the immediate reward as a function of its value
relative to the delayed reward, (i.e., from 0 to 1, the “endpoints” for
which the plot type is named):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">'endpoints'</span><span class="op">)</span></span>
<span><span class="co">#&gt; gamma parameter (steepness of psychometric curve curve) is scaled by val_del.</span></span>
<span><span class="co">#&gt; Thus, the curve will have different steepness for a different value of val_del.</span></span>
<span><span class="co">#&gt; Defaulting to val_del = 198.314285714286 (mean of val_del from data used to fit model).</span></span>
<span><span class="co">#&gt; Use the `val_del` argument to specify a custom value or use verbose = F to suppress this message.</span></span>
<span><span class="co">#&gt; Setting del = 57.8700610123057 (ED50) to center the curve.</span></span>
<span><span class="co">#&gt; This can be changed using the `del` argument.</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>This time we get some relevant messages. First, this curve is
centered by default (it corresponds to the delay at which the
indifference point is 0.5). Second, it corresponds to the average
delayed reward value from the data used for fitting the model. The
“logistic” choice rule (used by default) assumes that the “sharpness” of
the psychometric curve increases for higher reward values. We can
customize these using the <code>del</code> and <code>val_del</code>
arguments:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">del</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">mod</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">del</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">'endpoints'</span>, del <span class="op">=</span> <span class="va">del</span>, val_del <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Note that when <code>del</code> corresponds to one of the delays in
the data, the binary choices corresponding to that delay are included in
the plot as points on the y = 0 and y = 1 lines.</p>
</div>
<div class="section level2">
<h2 id="link-plots">
<code>"link"</code> plots<a class="anchor" aria-label="anchor" href="#link-plots"></a>
</h2>
<p>Finally, we can plot the probability of selecting the immediate
reward against the values of the link function. This is potentially
useful for visually detecting outliers.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mod</span>, type <span class="op">=</span> <span class="st">'link'</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="rt-plots">“<code>rt</code>” plots<a class="anchor" aria-label="anchor" href="#rt-plots"></a>
</h2>
<p>For drift <a href="drift-diffusion-models.html">diffusion models</a>,
we can create a plot of reaction times against the model’s
predictions:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ddm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/td_ddm.html">td_ddm</a></span><span class="op">(</span><span class="va">td_bc_single_ptpt</span>, discount_function <span class="op">=</span> <span class="st">'exponential'</span>,</span>
<span>              v_par_starts <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>              beta_par_starts <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>              alpha_par_starts <span class="op">=</span> <span class="fl">3.5</span>,</span>
<span>              tau_par_starts <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ddm</span>, type <span class="op">=</span> <span class="st">'rt'</span>, q_lines <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.95</span><span class="op">)</span>, legend <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualizing-models_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Here, we have selected to also view a 90% quantile-based confidence
interval around the model’s predictions.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Isaac Kinley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
